from openai import OpenAI
import os
from dotenv import load_dotenv

# Load env vars
load_dotenv()

api_key = os.getenv("AZURE_OPENAI_KEY")
azure_endpoint = os.getenv("AZURE_OPENAI_ENDPOINT")
api_version = os.getenv("AZURE_OPENAI_API_VERSION")
deployment_name = os.getenv("AZURE_OPENAI_DEPLOYMENT_NAME")

print("Loaded API KEY:", "YES" if api_key else "NO")
print("Loaded ENDPOINT:", azure_endpoint)
print("Loaded DEPLOYMENT:", deployment_name)

# Initialize client
client = OpenAI(
    api_key=api_key,
    api_version=api_version,
    base_url=f"{azure_endpoint}/openai/deployments/{deployment_name}"
)

# Small test request
response = client.responses.create(
    model=deployment_name,
    input="Hello! This is a test message. Are my Azure keys working?"
)

print("\nAPI Response:\n")
print(response.output_text)